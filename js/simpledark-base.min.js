if(!window.ajaxParams)var ajaxParams=!1;function extractParams(){var a=document.getElementsByTagName("script"),a=a[a.length-1].src.replace(/^[^\?]+\??/,"");return parseQuery(a)}function parseQuery(a){var c={};if(!a)return c;a=a.split("&");for(var b=0;b<a.length;b++){var d=a[b].split("=");if(d&&2==d.length){var f=unescape(d[0]),d=unescape(d[1]),d=decodeURIComponent(d);c[f]=d}}return c}
function textAreaFixCursorPosition(){var a;if(a=document.getElementById("comment"))if(document.selection){var c=a.createTextRange();c.text=a.value;c.collapse(!1)}else"number"==typeof a.selectionStart&&"number"==typeof a.selectionEnd&&(a.selectionStart=a.selectionEnd=a.value.length)}
function showMessage(a,c){$("#commentform .fade").remove();$("#submit").after('<span class="fade ajax-comment-msg">'+a+"</span>");$("#commentform .fade").delay(2E3).fadeOut(500,function(){$(this).remove();c&&"function"==typeof c&&c()})}function showError(a,c){$("#commentform .fade").remove();$("#submit").after('<span class="fade ajax-comment-error">'+a+"</span>");$("#commentform .fade").delay(2E3).fadeOut(500,function(){$(this).remove();c&&"function"==typeof c&&c()})}
function reply(a,c,b){0==$("#comment_edit_ID").val()||scriptParams.threadcmnts||cancelCommentEdit();b=$("#"+b);if(0==b.length)return!1;scriptParams.atreply&&(a='<a href="#'+c+'">@'+a.replace(/\t|\n/g,"")+" </a> \n",scriptParams.threadcmnts&&b.val(""),-1==b.val().indexOf(a)&&(""==b.val().replace(/\s|\t|\n/g,"")?b.val(a):b.val(b.val().replace(/[\n]*$/g,"")+"\n\n"+a)),textAreaFixCursorPosition());scriptParams.threadcmnts||($("#respond").ScrollTo(500),b.focus())}
function editComment(a){var c=$("#comment"),b=$("#comment_edit_ID"),d=a.attr("id").split("comment-")[1];if(b.val()==d)c.focus();else if(0!=b.val())$("#comment-"+b.val()).fadeTo(200,1),a.fadeTo(200,.2),b.val(d),c.val(a.children().children(".comment-text").text());else{b.val(d);c.val(a.children().children(".comment-text").text());var f=$("#respond"),b=$("#cancel-comment-reply-link");ajaxParams&&ajaxParams.cmntpost||($('<input type="hidden" name="action" id="action" value="comment_edit" />').insertAfter($("#comment_edit_ID")),
d=$("#commentform"),defaultAction=d.attr("action"),d.attr("action",scriptParams.tmpldir+"/comment-edit-post.php").data("action",defaultAction));b.fadeIn(200,function(){$(this).removeAttr("style")});a.fadeTo(200,.2);textAreaFixCursorPosition();f.find("#reply-title").animate({opacity:0},200,function(){shiftText();$(this).animate({opacity:1},200,function(){$(this).removeAttr("style")});f.ScrollTo(500);c.focus()})}}
function cancelCommentEdit(){var a=$("#comment"),c=$("#respond"),b=$("#cancel-comment-reply-link"),d=$("#comment-"+$("#comment_edit_ID").val());$("#comment_edit_ID").val(0);a.val("");ajaxParams&&ajaxParams.cmntpost||($("#action").remove(),a=$("#commentform"),a.attr("action",a.data("action")));b.fadeOut(200).unbind("click");d.fadeTo(200,1,function(){$(this).removeAttr("style")});c.find("#reply-title").animate({opacity:0},200,function(){shiftText();$(this).animate({opacity:1},200,function(){$(this).removeAttr("style")})});
return!1}function shiftText(){var a=$("#reply-title"),c=$("#cancel-comment-reply-link"),b=$("#edit-or-reply-title"),d=$("#edit-or-reply-cancel"),f=a.children("small");f.detach();title=a.html();cancel=c.html();a.html(b.html());c.html(d.html());b.html(title);d.html(cancel);f.appendTo(a)}var imageCache=[];function loadImage(){for(var a=arguments.length;a--;){var c=document.createElement("img");c.src=arguments[a];imageCache.push(c)}}var contentWidth=580;
function processContent(){$(".entry img").load(function(){var a=$(this).width(),b=$(this).height(),b=a/b,d=contentWidth,f=$(this).parents(".wp-caption");0<f.length?(f.width(a+14),f.width()>contentWidth&&(d=contentWidth-14,resizeToFit($(this),d,b),f.width(contentWidth))):a>contentWidth&&resizeToFit($(this),contentWidth,b)});if(scriptParams.hidesmallimgbdr){var a=function(a){var b=a.width(),d=a.height();0<scriptParams.smallimgwidth&&0<scriptParams.smallimgheight?"and"==scriptParams.smallimglogic?b<=
scriptParams.smallimgwidth&&d<=scriptParams.smallimgheight>0&&a.addClass("no-border"):(b<=scriptParams.smallimgwidth||d<=scriptParams.smallimgheight>0)&&a.addClass("no-border"):0<scriptParams.smallimgwidth?b<scriptParams.smallimgwidth&&a.addClass("no-border"):0<scriptParams.smallimgheight?d<scriptParams.smallimgheight&&a.addClass("no-border"):a.addClass("no-border")};$(".entry img").load(function(){var c=$(this);a(c)});$(".entry embed, .entry object, .entry iframe").each(function(){var c=$(this);
a(c)});$("img.no-border").load(function(){var a=$(this).parents(".wp-caption");a.width(a.width()-4)})}$(".entry img").each(function(){(this.complete||$.browser.msie&&6==parseInt($.browser.version))&&$(this).trigger("load")});$(".entry object").each(function(){var a,b,d=$(this).find("embed");0<d.length&&(a=d.width(),b=d.height());a&&b||(a=$(this).width(),b=$(this).height());var f=a/b;a>contentWidth?(resizeToFit($(this),contentWidth,f),0<d.length&&resizeToFit(d,contentWidth,f)):$.browser.msie&&8==$.browser.version&&
$(this).width(a).height(b)});$.browser.msie&&7>=$.browser.version&&($(".entry table").not(".wp_syntax table").each(function(){$(this).find("tr:not(thead tr, tfoot tr):odd").addClass("even")}),$("#comment").focus(function(){$(this).val($(this).val())}))}var commentWidth=[378,516,490,456,422,388];
function processComments(){$(".comment-body img").load(function(){var a=$(this).width(),c=$(this).height(),c=a/c,b=$(this).parents(".comment-body").parent().attr("class").match(/depth-(\d)/),b=b?b[1]:1;a>commentWidth[b]&&resizeToFit($(this),commentWidth[b],c)});scriptParams.hidesmallimgbdr&&($(".comment-body img").load(function(){var a=$(this),c=a.width(),b=a.height();0<scriptParams.smallimgwidth&&0<scriptParams.smallimgheight?"and"==scriptParams.smallimglogic?c<=scriptParams.smallimgwidth&&b<=scriptParams.smallimgheight>
0&&a.addClass("no-border"):(c<=scriptParams.smallimgwidth||b<=scriptParams.smallimgheight>0)&&a.addClass("no-border"):0<scriptParams.smallimgwidth?c<scriptParams.smallimgwidth&&a.addClass("no-border"):0<scriptParams.smallimgheight?b<scriptParams.smallimgheight&&a.addClass("no-border"):a.addClass("no-border")}),$("img.no-border").load(function(){var a=$(this).parents(".wp-caption");a.width(a.width()-4)}));$(".comment-body img").each(function(){(this.complete||$.browser.msie&&6==parseInt($.browser.version))&&
$(this).trigger("load")})}function processTooltip(a){a.find(".comment-body img").each(function(){var a=$(this).width(),b=$(this).height(),b=a/b;a>commentWidth[0]&&resizeToFit($(this),commentWidth[0],b)})}function resizeToFit(a,c,b){a.width(c).height(c/b)}var commentCache=[];
$(document).ready(function(){var a=$(".top-menu-window"),c=a.children("ul"),b=0,d=[];d.unshift(0);c.children("li").each(function(){b+=$(this).width();d.push(b)});if(d[d.length-1]>a.width()){var f=function(){k||u(100,f)},A=function(){k||l(100,A)},u=function(a,b){v.fadeIn(100);a||(a=200);var n=0-h,f;if(0<n){for(var e=0;e<d.length+1;e++)if(d[e]>=n){f=d[e-1];break}h=w-f;c.animate({"margin-left":h},a,b);0>=0-h&&x.fadeOut(100)}},l=function(a,B){x.fadeIn(100);a||(a=200);var n=g-h,f;if(n<b){for(var e=0;e<
d.length;e++)if(d[e]>n){f=d[e];break}h=g-f;c.animate({"margin-left":h},a,B);g-h>=b&&v.fadeOut(100)}};c.width(b);var x=$('<div class="scroller scroller-left" style="display:none;"></div>'),v=$('<div class="scroller scroller-right"></div>');x.insertBefore(a);v.insertAfter(a);var w=$(".scroller-left").width()-10,g=a.width()-w,h=w,t,p=c.children(".current-cat, .current_page_item, .current_page_ancestor, .current_menu_item, .current-menu-item, .current-menu-ancestor"),k=!1;if(b>g&&($(".scroller-right").mousedown(function(){k=
!1;l();t=setTimeout(function(){A()},500)}).bind("mouseup mouseout",function(){k=!0;clearTimeout(t)}),$(".scroller-left").mousedown(function(){k=!1;u();t=setTimeout(function(){f()},500)}).bind("mouseup mouseout",function(){k=!0;clearTimeout(t)}),c.children("li").children("a").mouseover(function(){var a=$(this).parent();0>a.position().left?u():a.position().left+a.width()>g&&l()}),0<p.length)){var y=function(){p.position().left>g?l(20,y):p.width()>g?l(20):p.position().left+p.width()>g&&l(20,y)};y()}}else c.width(d[d.length-
1]+1).animate({"margin-left":a.width()-d[d.length-1]-5},500);c.children("li").mouseenter(function(){a.stop().height($(document).height()-a.offset().top-45);var b=$(this).position().left+152>g||$(this).offset().left+200>a.offset().left+a.width();$(this).children("ul:not(:animated)").removeAttr("style").animate(b?{opacity:"show",height:"show",right:"0"}:{opacity:"show",height:"show",left:"0"},100);$(this).children("a").addClass("hover")}).mouseleave(function(){$(this).children("ul").animate({opacity:"hide",
height:"hide"},100);a.animate({height:45},100);$(this).children("a").removeClass("hover")});loadImage(scriptParams.tmpldir+"/images/loading.gif");$("body").delegate("a[href*=#]:not(.comment-reply-link, #cancel-comment-reply-link, .comment-edit-link, .commentnavi a)","click",function(){if($(this).is("li:not(.tooltip)>.comment-body a[href^=#comment-]")){var a,b,c;null!=(a=$(this).attr("href").match(/#comment-(\d+)/))&&(b=a[1]);c=$(".commentnavi .page-numbers.current").text();if((a=$.parseJSON($("#comment-page-number").val()))&&
c!=a[b]){c=document.URL.split(/#.*$/)[0].split(/\/comment-page-[\d]+\//)[0];var d=$("#cp_post_id").text();c+=/\?/i.test(c)?"&":"?";ajaxParams&&ajaxParams.cmntpagenav?(c+="action=cpage_ajax&post="+d+"&page="+a[b],ajaxPaginateComments(c,function(){$("#comment-"+b).ScrollTo(500)})):(c+="cpage="+a[b],window.location.href=c+"#comment-"+b)}else $("#comment-"+b).ScrollTo(300)}return location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname&&location.search==this.search?
(a=$(this).attr("href"),a=a.substring(a.indexOf("#")),"#"!=a&&$('[name="'+a.substring(1)+'"], '+a).ScrollTo(300),!1):!0});if(window.XMLHttpRequest){var q=$("#fixed-nav");q.fadeTo(0,.25);var C=$("#page");$("body").mousemove(function(a){a.pageX>q.offset().left+q.width()&&a.pageX>C.offset().left?q.stop().fadeTo(100,.25):q.stop().fadeTo(100,1)})}processContent();$("#content").delegate(".wp_syntax_wrapper","hover",function(a){"mouseenter"==a.type?$(this).children(".wp_syntax_lang").stop().fadeTo(200,.2):
$(this).children(".wp_syntax_lang").stop().fadeTo(200,1,function(){$(this).removeAttr("style")})});processComments();$("#reaction").delegate(".comment","mouseenter",function(a){$(this).addClass("hover").parents(".comment").removeClass("hover");a.stopPropagation()}).delegate(".comment","mouseleave",function(){$(this).removeClass("hover").parent().closest(".comment").addClass("hover")});$("#toggle-info").click(function(){var a=$("#comment-author-info");"none"==a.css("display")&&a.slideDown(500);$("#commentform .comment-notes").animate({opacity:"hide",
height:"hide",marginBottom:"hide"},500,function(){$(this).remove()});return!1});if(0<$("#comment").length){var e=$("#comment").get(0);$(".smiley-select").click(function(){var a=$(this).attr("alt");if(document.selection)e.focus(),sel=document.selection.createRange(),sel.text=a,e.focus();else if(e.selectionStart||"0"==e.selectionStart){var b=e.selectionEnd,c=b;e.value=e.value.substring(0,e.selectionStart)+a+e.value.substring(b,e.value.length);c+=a.length;e.focus();e.selectionStart=c;e.selectionEnd=
c}else e.value+=a,e.focus()})}$(".comment-reply-link").live("click",function(){var a=$(this).parent().parent().parent();reply(a.children().children("span.author").text(),a.attr("id"),"comment");return!1});scriptParams.commentquickedit&&!scriptParams.threadcmnts&&$(".comment-edit-link").live("click",function(a){a=$(this).parent().parent().parent();editComment(a,"comment");return!1});var z=$("#cancel-comment-reply-link");0<z.length&&(scriptParams.threadcmnts?z.click(cancelCommentReplyOrEdit):scriptParams.commentquickedit&&
z.click(cancelCommentEdit));$("#comments").delegate("li:not(.tooltip)>.comment-body a[href^=#comment-]","mouseenter",function(){var a,b,c;if(null!=(b=$(this).attr("href").match(/#comment-(\d+)/))){a=b[1];if(commentCache[a])c=commentCache[a],b=$(this).parents(".comment-list"),c.appendTo(b).stop().fadeTo(200,1);else if(c=$(".tooltip"),0<c.length?c.stop().children().remove():c=$('<li class="tooltip"></li>'),b=$("#comment-"+a),0<b.length)c.append(b.children().clone()),c.addClass(b.attr("class")).find(".actions").remove(),
c.children("ul").remove(),c.appendTo(b.parent()).stop().fadeTo(200,1),commentCache[a]=c;else{if(!ajaxGetComment)return;c.appendTo($(this).parents(".comment-list")).stop().fadeTo(200,1);ajaxGetComment(a,c,function(){commentCache[a]=c})}var d=$(this).offset(),e=$("#page").offset();b=d.left-e.left;d=d.top-e.top+$(this).height();c.css({left:b+30,top:d+10});processTooltip(c)}}).delegate("li:not(.tooltip)>.comment-body a[href^=#comment-]","mouseleave",function(){$(".tooltip").stop().fadeTo(200,0,function(){$(this).detach()})});
$("#comment").autoResize({extraSpace:0});scriptParams.quicksubmit&&$("#comment").keydown(function(a){a=window.event||a;null!=a&&a.ctrlKey&&13==a.keyCode&&$("#submit").click()});var r=$("#s"),m=$("#s-msg");""!=r.val()&&m.fadeTo(0,0);r.focus(function(){""==r.val()?m.stop().fadeTo(200,.25):m.stop().fadeTo(200,0,function(){$(this).hide()})}).blur(function(){""==r.val()&&m.stop().fadeTo(200,1,function(){$(this).removeAttr("style")})}).keyup(function(){""==r.val()?m.stop().fadeTo(200,.25):m.stop().fadeTo(200,
0,function(){$(this).hide()})})});
